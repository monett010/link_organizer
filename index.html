<!DOCTYPE html>
<html lang="en">
    <!--
	coffee_dev
	-->
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="main.css">
        <title>Bookmark Manager</title>
        <!-- <script src="test_js.js"></script> -->
         <script src="Bookmarks.js"></script>
    </head>
    <body>
        <h1>Bookmarks</h1>
         <nav id="main_menu" aria-label="main_menu">
            <button type="button">Add</button>
            <button type="button">Search</button>
            <button type="button">Options</button>
        </nav>
        <nav id="tags_menu" aria-label="tags_menu">
            <a href="index.html?tag=main">Main bookmarks</a>
            <a href="index.html?tag=archived">Archived bookmarks</a>
            <a href="index.html?tag=1">evil sites</a>
        </nav>
        <div id="add_bookmark" class="home_forms">
            <form id="add_form" method="POST" action="http://127.0.0.1:5000/add/bookmark">
                <input type="text" name="url">
                <button type="submit">Add</button>
            </form>
        </div>

        <div id="search"  class="home_forms">
            <form id="search_form" method="POST">
                <input type="text" name="q">
                <button type="submit">Search</button>
            </form>
        </div>

        <section id="main">
        <section id="bookmark_list">

            <!-- <div class="bookmark"> 
                <ul>
                    <li><a href="bookmark.html">Title</a></li>
                    <li><a href="bookmark.html">URL</a></li>
                    <li>tag | tag | tag</li>
                </ul> 
             </div>
             -->
        </section>
        </section>
        <script>
            const tag_links = new Tags();
            tag_links.printTagLinks();

            let bookmarks = new Bookmarks();
            

            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            let tag = urlParams.get('tag')
            
            if (tag === null || tag === "main") {
                let bookmarks_ = bookmarks.getBookmarks()
                bookmarks.writeBookmarks(bookmarks_);
            }
            else if (tag === "archived") {
                let bookmarks_ = bookmarks.getBookmarks("archived")
                bookmarks.writeBookmarks(bookmarks_);
            }
            else {
                let bookmarks_ = bookmarks.getBookmarksByTag(decodeURIComponent(tag))
                bookmarks.writeBookmarks(bookmarks_);
            }
        </script>
    </body>
</html>
